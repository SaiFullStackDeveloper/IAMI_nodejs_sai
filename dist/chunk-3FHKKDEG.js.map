{"version":3,"sources":["/Users/apple/Documents/Satya/UpW/Nodejs/iami-nodejs/dist/chunk-3FHKKDEG.js","../src/common/config/queue.ts"],"names":[],"mappings":"AAAA;AACE;AACA;AACF,sDAA4B;AAC5B;AACE;AACF,sDAA4B;AAC5B;AACA;ACRA,wEAAkB;AAIlB,IAAM,EAAE,SAAA,EAAW,cAAA,EAAgB,gBAAgB,EAAA,EAAI,oBAAA;AAChD,IAAM,WAAA,EAAa,IAAI,mBAAA;AAAA,EAC1B,OAAA;AAAA,EACA;AAAA,IACI,KAAA,EAAO;AAAA,EACX;AACJ,CAAA;AAEA,UAAA,CAAW,OAAA,CAAQ,CAAC,GAAA,EAAK,IAAA,EAAA,GAAS;AAE9B,EAAA,MAAM,EAAE,IAAA,EAAM,KAAA,EAAO,IAAA,EAAM,MAAM,EAAA,EAAI,GAAA,CAAI,IAAA;AAEzC,EAAA,GAAA,CAAI,KAAA,IAAS,QAAA,EAAU;AACnB,IAAA,0CAAA,KAAY,EAAO,IAAA,EAAM,CAAA,EAAA;AAC7B,EAAA;AAEuB,EAAA;AACM,IAAA;AAC7B,EAAA;AAEK,EAAA;AACR;ADE6B;AACA;AACA;AACA","file":"/Users/apple/Documents/Satya/UpW/Nodejs/iami-nodejs/dist/chunk-3FHKKDEG.js","sourcesContent":[null,"import Queue from \"bull\";\nimport { env } from \"./env\";\nimport { forgotEmail, signupEmail } from \"./email\";\n\nconst { REDIS_URI, BACKEND_DOMAIN, FRONTEND_DOMAIN } = env\nexport const emailQueue = new Queue(\n    'email',\n    {\n        redis: REDIS_URI,\n    }\n)\n\nemailQueue.process((job, done) => {\n\n    const { type, email, name, token } = job.data\n\n    if (type === 'Signup') {\n        signupEmail(email, name, `${BACKEND_DOMAIN}/auth/verification/${token}/${email}`)\n    }\n\n    if (type === 'Forgot') {\n        forgotEmail(email, name, `${FRONTEND_DOMAIN}/auth/forgot?code=${token}&email=${email}`)\n    }\n\n    done()\n})"]}